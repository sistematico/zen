<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Zen</title>        
    <meta property="og:title" content="Zen" />
    <meta property="og:description" content="Fique Zen!" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://zen.lucasbrum.net" />
    <meta property="og:image" content="img/logo.png" />
    <link rel="stylesheet" href="css/plyr.css" />
    <link rel="stylesheet" href="css/bulma.min.css">
    <link rel="shortcut icon" href="img/favicon.ico">
</head>
<body>
    <nav class="navbar" role="navigation" aria-label="main navigation">
        <div class="navbar-brand">
            <a class="navbar-item" href="/"><img src="img/logo-navbar.png" width="112" height="28"></a>
            <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false"
                data-target="navbarDefault">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>
        <div id="navbarDefault" class="navbar-menu">
            <div class="navbar-start">
                <a href="/" class="navbar-item">In√≠cio</a>
                <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link">Temas</a>
                    <div class="navbar-dropdown">
                        <a href="#mar" class="navbar-item">Mar</a>
                        <a href="#chuva" class="navbar-item">Chuva</a>
                        <a href="#campo" class="navbar-item">Campo</a>
                    </div>
                </div>
            </div>
            <div class="navbar-end">
                <div class="navbar-item">
                    <div class="buttons">
                        <a href="https://github.com/sistematico/zen" class="button is-light">Github</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    <section class="section">
        <div class="container">
            <h1 class="title">Zen</h1>
            <p class="subtitle"></p>

            <video id="player" playsinline controls loop data-poster="/path/to/poster.jpg">
                <source src="mp4/rain.mp4" type="video/mp4" />
            </video>
        </div>
    </section>
<script src="js/navbar.js"></script>
<script src="js/plyr.min.js"></script>
<script>
const player = new Plyr('#player', {
    iconUrl: '/css/plyr.svg'
});

player.on('timeupdate', event => {
    //const instance = event.detail.plyr;
    console.log(player.duration, player.currentTime)

    let buffer = .48
    if(player.currentTime > player.duration - buffer) {
        console.log("Loop")
        player.currentTime = 0
        player.play()
    }
});

//     var audio_file = new Audio('whatever.mp3')
// audio_file.addEventListener('timeupdate', function(){
//     var buffer = .44
//     if(this.currentTime > this.duration - buffer){
//         this.currentTime = 0
//         this.play()
//     }
// });
</script>
</body>
</html>